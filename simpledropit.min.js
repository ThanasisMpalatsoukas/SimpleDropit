!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e=e||self).SimpleDropit=s()}(this,function(){"use strict";function e(e){return e&&e.ownerDocument?e.ownerDocument:document}function s(e,s){return e?e.classList.contains(s):null}var t=function(){function t(e,l=null){var i=this;try{if("string"==typeof e)throw new Error("Invalid Element Object.");if("object"!=typeof e||null===e)throw new Error("Element Object does not exists.");this.el=e}catch(e){return void console.error(e.name+": "+e.message)}this.isAdvancedUpload=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},this.onChange=function(e){i.boxEl.classList.add("is-dropped"),t.showFiles(i.filenameEl,e.target.files)},this.dragIn=function(e){s(i.boxEl,"is-dragover")||i.boxEl.classList.add("is-dragover")},this.dragOut=function(e){s(i.boxEl,"is-dragover")&&i.boxEl.classList.remove("is-dragover")},this.drop=function(e){i.boxEl.classList.add("is-dropped"),i.droppedFiles=e.dataTransfer.files,t.showFiles(i.filenameEl,i.droppedFiles)},this.preventEventPropagation=function(e){e.preventDefault(),e.stopPropagation()},this.options=Object.assign({},t.defaultOptions,{},l),this.classNames=Object.assign({},t.defaultOptions.classNames,{},this.options.classNames),t.instances.has(this.el)||this.init()}t.showFiles=function(e,s){e.innerText=s.length>1?s.length+" files selected / ":s[0].name+" / "};var l=t.prototype;return l.init=function(){t.instances.set(this.el,this),this.initDom(),this.initListeners()},l.initDom=function(){if(null!==this.el.closest("."+this.classNames.boxEl))this.boxEl=this.el.closest("."+this.classNames.boxEl),this.boxWrapperEl=this.boxEl.querySelector("."+this.classNames.boxWrapperEl),this.labelWrapperEl=this.boxEl.querySelector("."+this.classNames.labelWrapperEl),this.supportedLabelEl=this.boxEl.querySelector("."+this.classNames.supportedLabelEl),this.filenameEl=this.boxEl.querySelector("."+this.classNames.filenameEl),this.browseLabelEl=this.boxEl.querySelector("."+this.classNames.browseLabelEl);else{var e=this.el.cloneNode(!0);this.boxEl=document.createElement("div"),this.boxWrapperEl=document.createElement("div"),this.labelWrapperEl=document.createElement("div"),this.supportedLabelEl=document.createElement("span"),this.filenameEl=document.createElement("span"),this.browseLabelEl=document.createElement("label"),this.boxEl.classList.add(this.classNames.boxEl),this.boxWrapperEl.classList.add(this.classNames.boxWrapperEl),this.labelWrapperEl.classList.add(this.classNames.labelWrapperEl),this.supportedLabelEl.classList.add(this.classNames.supportedLabelEl),this.filenameEl.classList.add(this.classNames.filenameEl),this.browseLabelEl.classList.add(this.classNames.browseLabelEl),this.el.classList.add("sdd-file-input","sdd-file-input-hide"),this.supportedLabelEl.innerHTML=this.options.supportedLabel+"&nbsp;",this.labelWrapperEl.appendChild(this.supportedLabelEl),this.labelWrapperEl.appendChild(this.filenameEl),this.browseLabelEl.innerHTML='Browse <span class="sdd-box-browse-file">File</span></span>',this.labelWrapperEl.appendChild(this.browseLabelEl),this.labelWrapperEl.appendChild(e),this.boxWrapperEl.appendChild(this.labelWrapperEl),this.boxEl.appendChild(this.boxWrapperEl),this.el.after(this.boxEl),this.el.remove(),this.el=e}this.isAdvancedUpload&&this.boxEl.classList.add("sdd-advanced-upload")},l.initListeners=function(){var s=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(t){e(s.boxEl).addEventListener(t,s.preventEventPropagation,!1),s.boxEl.addEventListener(t,s.preventEventPropagation,!1)}),["dragenter","dragover"].forEach(function(t){e(s.boxEl).addEventListener(t,s.dragIn,!0)}),["dragleave","drop"].forEach(function(t){e(s.boxEl).addEventListener(t,s.dragOut,!0)}),this.boxEl.addEventListener("drop",s.drop,!0),this.el.addEventListener("change",s.onChange,!0),this.browseLabelEl.addEventListener("click",function(e){!function(e){if(e.click)e.click();else if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),e.dispatchEvent(s)}}(s.el)})},t}();return t.defaultOptions={supportedLabel:"Drag & Drop file or",classNames:{boxEl:"sdd-input-file-box",boxWrapperEl:"sdd-input-file-box-wrapper",labelWrapperEl:"sdd-input-file-label",supportedLabelEl:"sdd-box-dragndrop",filenameEl:"sdd-box-file-name",browseLabelEl:"sdd-label"}},t.instances=new WeakMap,t});