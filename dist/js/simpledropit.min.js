/**
 * SimpleDropit.js - v0.1.0
 * Drag-n-drop files, Simple for modern browsers
 * https://nishantk02.github.io/SimpleDropit
 *
 * Made by Nishant K
 * Under MIT License
 */

!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e="undefined"!=typeof globalThis?globalThis:e||self).SimpleDropit=s()}(this,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}function s(e){return e&&e.ownerDocument?e.ownerDocument:document}function t(e,s){return e?e.classList.contains(s):null}var l=function(){function l(s,i){var a=this;this.isAdvancedUpload=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},this.onChange=function(e){a.boxEl.classList.add("is-dropped"),l.showFiles(a.filenameEl,e.target.files)},this.dragIn=function(e){t(a.boxEl,"is-dragover")||a.boxEl.classList.add("is-dragover")},this.dragOut=function(e){t(a.boxEl,"is-dragover")&&a.boxEl.classList.remove("is-dragover")},this.drop=function(e){a.boxEl.classList.add("is-dropped"),a.droppedFiles=e.dataTransfer.files,l.showFiles(a.filenameEl,a.droppedFiles)},this.preventEventPropagation=function(e){e.preventDefault(),e.stopPropagation()};try{if("string"==typeof s)throw new Error("Invalid Element Object.");if("object"!=typeof s||null===s)throw new Error("Element Object does not exists.");this.el=s}catch(e){return void console.error(e.name+": "+e.message)}this.options=e({},l.defaultOptions,i),this.classNames=e({},l.defaultOptions.classNames,this.options.classNames),l.instances.has(this.el)||this.init()}var i=l.prototype;return i.init=function(){l.instances.set(this.el,this),this.initDom(),this.initListeners()},i.initDom=function(){if(null!==this.el.closest("."+this.classNames.boxEl))this.boxEl=this.el.closest("."+this.classNames.boxEl),this.boxWrapperEl=this.boxEl.querySelector("."+this.classNames.boxWrapperEl),this.labelWrapperEl=this.boxEl.querySelector("."+this.classNames.labelWrapperEl),this.supportedLabelEl=this.boxEl.querySelector("."+this.classNames.supportedLabelEl),this.filenameEl=this.boxEl.querySelector("."+this.classNames.filenameEl),this.browseLabelEl=this.boxEl.querySelector("."+this.classNames.browseLabelEl);else{var e=this.el.cloneNode(!0);this.boxEl=document.createElement("div"),this.boxWrapperEl=document.createElement("div"),this.labelWrapperEl=document.createElement("div"),this.supportedLabelEl=document.createElement("span"),this.filenameEl=document.createElement("span"),this.browseLabelEl=document.createElement("label"),this.boxEl.classList.add(this.classNames.boxEl),this.boxWrapperEl.classList.add(this.classNames.boxWrapperEl),this.labelWrapperEl.classList.add(this.classNames.labelWrapperEl),this.supportedLabelEl.classList.add(this.classNames.supportedLabelEl),this.filenameEl.classList.add(this.classNames.filenameEl),this.browseLabelEl.classList.add(this.classNames.browseLabelEl),this.el.classList.add("sd-file-input","sd-file-input-hide"),this.supportedLabelEl.innerHTML=this.options.supportedLabel+"&nbsp;",this.labelWrapperEl.appendChild(this.supportedLabelEl),this.labelWrapperEl.appendChild(this.filenameEl),this.browseLabelEl.innerHTML='Browse <span class="sd-box-browse-file">File</span></span>',this.labelWrapperEl.appendChild(this.browseLabelEl),this.labelWrapperEl.appendChild(e),this.boxWrapperEl.appendChild(this.labelWrapperEl),this.boxEl.appendChild(this.boxWrapperEl),this.el.after(this.boxEl),this.el.remove(),this.el=e}this.isAdvancedUpload&&this.boxEl.classList.add("sd-advanced-upload")},i.initListeners=function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){s(e.boxEl).addEventListener(t,e.preventEventPropagation,!1),e.boxEl.addEventListener(t,e.preventEventPropagation,!1)})),["dragenter","dragover"].forEach((function(t){s(e.boxEl).addEventListener(t,e.dragIn,!0)})),["dragleave","drop"].forEach((function(t){s(e.boxEl).addEventListener(t,e.dragOut,!0)})),this.boxEl.addEventListener("drop",this.drop,!0),this.el.addEventListener("change",this.onChange,!0),this.browseLabelEl.addEventListener("click",(function(s){!function(e){if(e.click)e.click();else if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),e.dispatchEvent(s)}}(e.el)}))},l.showFiles=function(e,s){e.innerText=s.length>1?s.length+" files selected / ":s[0].name+" / "},l}();return l.instances=new WeakMap,l.defaultOptions={supportedLabel:"Drop file here /",classNames:{boxEl:"sd-box",boxWrapperEl:"sd-box-wrapper",labelWrapperEl:"sd-label",supportedLabelEl:"sd-box-dragndrop",filenameEl:"sd-box-file-name",browseLabelEl:"sd-label"}},l}));
