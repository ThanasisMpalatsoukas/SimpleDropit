/**
 * SimpleDropit.js - v0.1.0
 * Drag-n-drop files, Simple for modern browsers
 * https://nishantk02.github.io/SimpleDropit
 *
 * Made by Nishant K
 * Under MIT License
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SimpleDropit=t()}(this,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}function t(e,s){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,s)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return e&&e.ownerDocument?e.ownerDocument:document}function i(e,t){return e?e.classList.contains(t):null}var a=function(a){var n,r;function o(t,l){var n;(n=a.call(this)||this).isAdvancedUpload=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},n.onChange=function(e){o.isFiles(e)&&(o.showFiles(n.filenameEl,e.target.files),n.boxEl.classList.add("is-dropped"))},n.dragIn=function(e){o.isFiles(e)&&(i(n.boxEl,"is-dragover")||n.boxEl.classList.add("is-dragover"))},n.dragOut=function(e){o.isFiles(e)&&i(n.boxEl,"is-dragover")&&n.boxEl.classList.remove("is-dragover")},n.drop=function(e){o.isFiles(e)&&(n.droppedFiles=e.dataTransfer.files,o.showFiles(n.filenameEl,n.droppedFiles),n.boxEl.classList.add("is-dropped"))},n.preventEventPropagation=function(e){e.preventDefault(),e.stopPropagation()};try{if("string"==typeof t)throw new Error("Invalid Element Object");if("object"!=typeof t||null===t)throw new Error("Element Object does not exists");n.el=t}catch(e){return console.error(e.name+": "+e.message),s(n)}return n.options=e({},o.defaultOptions,l),n.classNames=e({},o.defaultOptions.classNames,n.options.classNames),o.instances.has(n.el)?s(n):(n.init(),n)}r=a,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,t(n,r);var d=o.prototype;return d.init=function(){o.instances.set(this.el,this),this.initDom(),this.initListeners()},d.initDom=function(){if(null!==this.el.closest("."+this.classNames.boxEl))this.boxEl=this.el.closest("."+this.classNames.boxEl),this.boxWrapperEl=this.boxEl.querySelector("."+this.classNames.boxWrapperEl),this.labelWrapperEl=this.boxEl.querySelector("."+this.classNames.labelWrapperEl),this.supportedLabelEl=this.boxEl.querySelector("."+this.classNames.supportedLabelEl),this.filenameEl=this.boxEl.querySelector("."+this.classNames.filenameEl),this.browseLabelEl=this.boxEl.querySelector("."+this.classNames.browseLabelEl);else{var e=this.el.cloneNode(!0);this.boxEl=document.createElement("div"),this.boxWrapperEl=document.createElement("div"),this.labelWrapperEl=document.createElement("div"),this.supportedLabelEl=document.createElement("span"),this.filenameEl=document.createElement("span"),this.browseLabelEl=document.createElement("label"),this.boxEl.classList.add(this.classNames.boxEl),this.boxWrapperEl.classList.add(this.classNames.boxWrapperEl),this.labelWrapperEl.classList.add(this.classNames.labelWrapperEl),this.supportedLabelEl.classList.add(this.classNames.supportedLabelEl),this.filenameEl.classList.add(this.classNames.filenameEl),this.browseLabelEl.classList.add(this.classNames.browseLabelEl),this.el.classList.add("sd-file-input","sd-file-input-hide"),this.supportedLabelEl.innerHTML=this.options.supportedLabel+"&nbsp;",this.labelWrapperEl.appendChild(this.supportedLabelEl),this.labelWrapperEl.appendChild(this.filenameEl),this.browseLabelEl.innerHTML='Browse <span class="sd-box-browse-file">File</span></span>',this.labelWrapperEl.appendChild(this.browseLabelEl),this.labelWrapperEl.appendChild(e),this.boxWrapperEl.appendChild(this.labelWrapperEl),this.boxEl.appendChild(this.boxWrapperEl),this.el.after(this.boxEl),this.el.remove(),this.el=e}this.isAdvancedUpload&&this.boxEl.classList.add("sd-advanced-upload")},d.initListeners=function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){l(e.boxEl).addEventListener(t,e.preventEventPropagation,!1),e.boxEl.addEventListener(t,e.preventEventPropagation,!1)})),["dragenter","dragover"].forEach((function(t){l(e.boxEl).addEventListener(t,e.dragIn,!0)})),["dragleave","drop"].forEach((function(t){l(e.boxEl).addEventListener(t,e.dragOut,!0)})),this.boxEl.addEventListener("drop",this.drop,!0),this.el.addEventListener("change",this.onChange,!0),this.browseLabelEl.addEventListener("click",(function(t){!function(e){if(e.click)e.click();else if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}}(e.el)}))},o.showFiles=function(e,t){var s=t[0].name;return""!==s&&void 0!==s&&(e.innerText=t.length>1?t.length+" files selected / ":s+" / ",!0)},o}(function(){function e(){}return e.isFiles=function(e){var t=!1;return e.dataTransfer.types&&e.dataTransfer.types.forEach((function(e,s){"Files"!==e&&"application/x-moz-file"!==e||(t=!0)})),t},e}());return a.instances=new WeakMap,a.defaultOptions={supportedLabel:"Drop file here /",classNames:{boxEl:"sd-box",boxWrapperEl:"sd-box-wrapper",labelWrapperEl:"sd-label",supportedLabelEl:"sd-box-dragndrop",filenameEl:"sd-box-file-name",browseLabelEl:"sd-label"}},a}));
